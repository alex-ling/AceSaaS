$.fn.form.defaults.success=null;$.fn.monthbox={};$.fn.monthbox.formatter=function(n){return AX.datestr(n,"yyyy-MM")};$.fn.monthbox.parser=function(n){var t=Date.parse(n);return isNaN(t)?new Date:new Date(t)};$.fn.monthbox.onShowPanel=function(){var n=this,t=$(n).datebox("calendar"),i=t.find("span.calendar-text");i.trigger("click");setTimeout(function(){var r=t.find("div.calendar-menu-month-inner td");r.click(function(t){t.stopPropagation();var r=/\d{4}/.exec(i.html())[0],u=parseInt($(this).attr("abbr"),10);$(n).datebox("hidePanel").datebox("setValue",r+"-"+u)})},0)};$.extend($.messager,{bodyStyle:"padding:3px 8px 5px;border:1px solid #e2d526;background-color:#fcf495;font-weight:bold;overflow:hidden",info:function(n){var t=AX.len(n.msg)*7;t<300&&(t=300);t>AX.opts.maxW&&(t=AX.opts.maxW-100);window.top.$.messager.show($.extend({bodyStyle:$.messager.bodyStyle+";color:green",height:30,width:t,showType:"fade",timeout:3e3,style:{top:10,padding:0,border:0,position:"fixed"}},n))},error:function(n){$.messager.info($.extend(n,{bodyStyle:$.messager.bodyStyle+";color:red",timeout:4e3}))}});$.extend($.fn.validatebox.defaults.rules,{equals:{validator:function(n,t){return n==$(t[0]).val()},message:"输入的字符不一致"},uid:{validator:function(n,t){return n.length<=t[1]&&n.length>=t[0]?new RegExp("^(?!_)(?!.*?_$)[a-zA-Z0-9_]+$").test(n):!1},message:"输入4-20位的字母、数字和下划线(不能开头和结尾)"}});$.extend($.fn.combobox.methods,{setIndex:function(n,t){t||(t=0);var i=n.combobox("getData"),r=$(n).combobox("options").valueField;n.combobox("select",i[t][r])},getIndex:function(n){return n.combobox("panel").find(".combobox-item-selected").index()}});$.extend($.fn.tree.defaults,{onLoadSuccess:function(n,t){var i,r;AX.opts._curTreeId!=null&&(i=$(this).tree("find",AX.opts._curTreeId).target,$(this).tree("select",i),$(this).tree("scrollTo",i));r=$(this).tree("options");r.success.call(this,n,t)},success:function(){}});$.extend($.fn.tree.methods,{selectLeaf:function(n){for(var t=n.tree("getRoot"),i=n.tree("getChildren",t.target);i.length;)t=i[0],i=n.tree("getChildren",t.target);n.tree("select",t.target)},getLevel:function(n,t){var i;if(typeof t=="undefined")return i=n.tree("getSelected"),i==null?0:n.tree("getLevel",i.target);if(typeof t=="number"){var r=!0,i=n.tree("getSelected"),u=t<0?3:t>1?2:t,f=["最底层","根",AX.format("第{0}层",t),"非根"][u];return(r=i==null?!1:t==0?n.tree("isLeaf",i.target):t==-1?n.tree("getLevel",i.target)!=1:n.tree("getLevel",i.target)==t,!r)?($.messager.error({msg:AX.format("请选择树{0}节点后再执行操作！",f)}),null):i}return $(t).find("span.tree-indent,span.tree-hit").length},getPrev:function(n,t){var i=$(t).parent().prev().children();return i.length?n.tree("getNode",i[0]):null},getNext:function(n,t){var i=$(t).parent().next().children();return i.length?n.tree("getNode",i[0]):null},getCheckedId:function(n,t){for(var u,i="",f=n.tree("getChecked"),r=0;r<f.length;r++)u=t?f[r].attributes[t]:f[r].id,u!=""&&(i+=","+u);return i==""?$.messager.error({msg:"请选择树节点后再执行操作！"}):i=i.substr(1),i},getSelectedId:function(n,t){var i,t=t||{};return(t.level==0||t.level?i=n.tree("getLevel",t.level):(i=n.tree("getSelected"),i==null&&$.messager.error({msg:"请选择树节点后再执行操作！"})),i!=null)?(AX.opts._curTreeId=i.id,t.editUrl&&(t.editUrl=AX.objstr(t.editUrl,i.attributes)),t.idField?i.attributes?i.attributes[t.idField]:"":i.id):null},add:function(n,t){var r,u,i;(t=$.extend({},n.tree("options"),t),r=n.tree("getSelectedId",t),u=n.tree("getSelectedId",{idField:"no"}),r!=null)&&(i=t.editUrl||"edit",i=AX.aurl(i,"parentid",r),u&&(i=AX.aurl(i,"parentno",u)),t.q&&(i+=(i.indexOf("?")>0?"&":"?")+t.q),AX.opts.dialogMode?AX.dialog("添加",i,function(){$.messager.info({msg:"添加成功！"});n.tree("reload")},t.w?t.w:AX.opts.w,t.h?t.h:AX.opts.h):AX.load(i))},edit:function(n,t){var r,i;(t=$.extend({},n.tree("options"),t),r=n.tree("getSelectedId",t),r!=null)&&(i=t.editUrl||"edit",i=AX.aurl(i,"id",r),t.q&&(i+="&"+t.q),AX.opts.dialogMode?AX.dialog("编辑",i,function(){$.messager.info({msg:"保存成功！"});n.tree("reload")},t.w?t.w:AX.opts.w,t.h?t.h:AX.opts.h):AX.load(i))},del:function(n,t){var r,i,u,f;(t=$.extend({},n.tree("options"),t),r=n.tree("getSelectedId",t),r!=null)&&(i=n.tree("getSelected").target,u=n.tree("getNext",i),u!=null?AX.opts._curTreeId=u.id:(f=n.tree("getPrev",i),AX.opts._curTreeId=f!=null?f.id:n.tree("getParent",i).id),$.messager.confirm("提示","确定要【删除】选中的节点？",function(i){i&&AX.ajax({url:AX.api({api:t.delApi||"crud/delete",ds:t.ds||t.delDs,q:"id="+r}),type:"delete",cb:function(){$.messager.info({msg:"删除成功！"});n.tree("reload")}})}))}});$.extend($.fn.datagrid.defaults,{onLoadSuccess:function(n){var t=$(this),l=t.datagrid("options"),s,f,i,e,u,c;for(l.export&&AX.gridTb(t),t.datagrid("clearChecked"),t.datagrid("getPanel").find(".easyui-linkbutton").linkbutton({plain:!0}),t.datagrid("getPanel").find(".easyui-tooltip").tooltip(),s=t.datagrid("getColumnFields",!0).concat(t.datagrid("getColumnFields")),f=[],i=0;i<s.length;i++)if(e=s[i],f.push([]),t.datagrid("getColumnOption",e).merged){var a=n.rows[0][e],h=0,r=1,o=0,v=0;for(i>0&&(o=f[i-1][v++]),u=1;u<n.rows.length;u++)a!=n.rows[u][e]||u==o?(u==o&&(o+=f[i-1][v++]),a=n.rows[u][e],r>1?(t.datagrid("mergeCells",{index:h,field:e,rowspan:r}),f[i].push(r),r=1):f[i].push(1),h=u):r++;r>1&&(t.datagrid("mergeCells",{index:h,field:e,rowspan:r}),f[i].push(r))}t.datagrid("resize");c=t.datagrid("getColumnOption","action");c&&c.width<40&&t.datagrid("autoSizeColumn","action");l.success.call(this,n)},success:function(){},onAceEdit:function(){},onAceDelete:function(){}});$.extend($.fn.datagrid.methods,{getRow:function(n,t){if(typeof t=="undefined")return n.datagrid("getSelected");var i=n.datagrid("getRows"),r=n.datagrid("getRowIndex",t);return i[r]},getCheckedId:function(n,t){for(var u,i="",f=n.datagrid("getChecked"),r=0;r<f.length;r++)u=t?f[r][t]:f[r].id,u!=""&&(i+=","+u);return i==""?$.messager.error({msg:"请选择记录后再执行批量操作！"}):i=i.substr(1),i},add:function(n,t){var i=n.datagrid("options"),r=i.editUrl||"edit";t&&(r+=(r.indexOf("?")>0?"&":"?")+t);AX.opts.dialogMode?AX.dialog("添加",r,function(){$.messager.info({msg:"添加成功！"});n.datagrid("reload")},i.w?i.w:AX.opts.w,i.h?i.h:AX.opts.h):AX.load(r)},edit:function(n,t){var i=n.datagrid("options"),r=i.editUrl||"edit";r=AX.aurl(r,"id",t);AX.opts.dialogMode?AX.dialog("编辑",r,function(){$.messager.info({msg:"保存成功！"});n.datagrid("reload");i.onAceEdit&&i.onAceEdit.call(n,t)},i.w?i.w:AX.opts.w,i.h?i.h:AX.opts.h):AX.load(r)},del:function(n,t){var i=n.datagrid("options"),r;(typeof t=="undefined"&&(t=n.datagrid("getCheckedId")),t!="")&&(r=i.delTip||"删除",$.messager.confirm("提示","确定要【"+r+"】选中的记录？",function(u){u&&AX.ajax({url:AX.api({api:i.delApi||"crud/delete",ds:i.delDs,q:"id="+t}),type:"delete",cb:function(){$.messager.info({msg:r+"成功！"});n.datagrid("reload");i.onAceDelete&&i.onAceDelete.call(n,t)}})}))}});$.extend($.fn.treegrid.defaults,{onBeforeLoad:function(n,t){n||(t.id="")},onLoadSuccess:function(n,t){var i=$(this),u=i.datagrid("options"),r;i.treegrid("clearChecked");i.treegrid("getPanel").find(".easyui-linkbutton").linkbutton({plain:!0});i.treegrid("resize");r=i.datagrid("getColumnOption","action");r&&r.width<40&&i.datagrid("autoSizeColumn","action");u.success.call(this,n,t)},success:function(){}});$.extend($.fn.treegrid.methods,{getRow:function(n,t){return typeof t=="undefined"?n.treegrid("getSelected"):n.treegrid("find",t)},getCheckedId:function(n,t){for(var u,i="",f=n.treegrid("getChecked"),r=0;r<f.length;r++)u=t?f[r][t]:f[r].id,u!=""&&(i+=","+u);return i==""?$.messager.error({msg:"请选择记录后再执行批量操作！"}):i=i.substr(1),i},add:function(n,t){var i=n.treegrid("options"),r=i.editUrl||"edit";t&&(r+=(r.indexOf("?")>0?"&":"?")+t);AX.opts.dialogMode?AX.dialog("添加",r,function(){$.messager.info({msg:"添加成功！"});n.treegrid("reload")},i.w?i.w:AX.opts.w,i.h?i.h:AX.opts.h):AX.load(r)},edit:function(n,t){var i=n.treegrid("options"),r=i.editUrl||"edit";r=AX.aurl(r,"id",t);AX.opts.dialogMode?AX.dialog("编辑",r,function(){$.messager.info({msg:"保存成功！"});n.treegrid("reload")},i.w?i.w:AX.opts.w,i.h?i.h:AX.opts.h):AX.load(r)},del:function(n,t){var i=n.treegrid("options"),r;(typeof t=="undefined"&&(t=n.treegrid("getCheckedId")),t!="")&&(r=i.delTip||"删除",$.messager.confirm("提示","确定要【"+r+"】选中的记录？",function(u){u&&AX.ajax({url:AX.api({api:i.delApi||"crud/delete",ds:i.delDs,q:"id="+t}),type:"delete",cb:function(){$.messager.info({msg:r+"成功！"});n.treegrid("reload")}})}))}}),function(n){function i(t){var u=t.id,e=n(t).parent(),f=n.data(t,"uploadbox"),r=n.extend({id:u,browse_button:"btn_"+u},f.options),o=AX.format('<div class="upload-wrapper">            <div class="btn-wrapper">            <input type="button" value=" 选择文件 " id="btn_{0}" />            <b class="ml5">{2}单个不要超过{1}<\/b>            <\/div>            <div class="file-wrapper"><div class="clear"><\/div><\/div>            <\/div>',u,r.filters.max_file_size,r.picView?"":"最多上传"+r.max+"个文件，"),i;n(o).insertAfter(t);i=new plupload.Uploader(r);f.options._uploader=i;i._opts=r;i._box=n(t);i._files=n(".file-wrapper",e);i.init();r.picView||n("#btn_"+u).click(function(){var t=i._files.children().length-1;t>=i._opts.max?(n.messager.error({msg:"最多上传"+i._opts.max+"个文件"}),i.disableBrowse(!0)):i.disableBrowse(!1)})}function r(n){var t=AX.tick();return(!n.params||n.params.expire<t+3)&&AX.ajax({url:AX.api({api:"cloud/getosssign"}),data:{bucket:n._opts.bucket,dir:n._opts.dir},type:"get","async":!1,cb:function(t){n.params=t.value}}),n.params}function t(i,r){var u,f;i._opts.picView&&(i._files.find("#file-1").remove(),u=!1,i._files.find("div.file").each(function(){n(this).find("a.fr").click();u=!0}),u)||(f=AX.format('<div id="file-{0}" class="file" style="{4}">{5}            <div class="file-name" style="{6}">            <a class="lk" target="_blank">{1}<\/a>            <span>{2}<\/span>            <b>{3}%<\/b>            <a class="fr" href="javascript:;" style="{6}">删除<\/a>            <div class="clear"><\/div>            <\/div>            <div class="progress" style="{6}">            <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100"><\/div>            <\/div>            <\/div>',r.id,r.name,r.size>0?"("+plupload.formatSize(r.size)+")":"",r.percent||0,i._opts.picView?AX.format("float:left;width:{0}px",i._opts.picWidth):"",i._opts.picView?AX.format('<img style="width:100%;height:{0}px;border:1px solid #ccc" />',i._opts.picHeight):"",i._opts.picView&&r.url=="/images/none.jpg"?"display:none":""),n(f).insertBefore(i._files.find(".clear").last()).find("a.fr").click(function(){r.percent>=100&&(i._opts.bucket?AX.ajax({url:AX.api({api:"cloud/delossfile"}),data:{bucket:i._opts.bucket,key:r.ossName},type:"delete",cb:function(){i._box.val(i._box.val().replace(","+r.url,""))}}):i._opts.dir&&AX.ajax({url:AX.api({api:"file/deletefile"}),data:{id:r.url},type:"delete",cb:function(){i._box.val(i._box.val().replace(","+r.url,""))}}));r.size>0&&i.removeFile(r);n(this).closest(".file").slideUp(1e3,function(){n(this).remove();i._opts.picView&&(i.files.length?t(i,i.files[0]):t(i,{id:"1",name:"none",ossName:"",url:"/images/none.jpg",size:0,percent:100}))})}),r.percent>=100&&n("#file-"+r.id).find(".progress-bar").attr("aria-valuenow",r.percent).css("width",r.percent+"%").end().find("img").attr("src",r.url).end().find(".lk").attr("href",r.url))}n.fn.uploadbox=function(t,r){return typeof t=="string"?n.fn.uploadbox.methods[t](this,r):(t=t||{},this.each(function(){var r=n.data(this,"uploadbox");r?n.extend(r.options,t):r=n.data(this,"uploadbox",{options:n.extend({},n.fn.uploadbox.defaults,n.fn.uploadbox.parseOptions(this),t)});i(this)}))};n.fn.uploadbox.methods={options:function(t){return n.data(t[0],"uploadbox").options},start:function(t){var i=n.data(t[0],"uploadbox").options;i._uploader.start()}};n.fn.uploadbox.parseOptions=function(t){var i=n(t);return n.extend({},n.parser.parseOptions(t,[]),{})};n.fn.uploadbox.defaults={url:"/api/file/upload",runtimes:"html5,flash,silverlight,html4",multi_selection:!0,flash_swf_url:"plupload/js/Moxie.swf",silverlight_xap_url:"plupload/js/Moxie.xap",multipart:!0,autoUpload:!0,max_retries:0,beforeUpload:function(){},uploaded:function(){},filters:{mime_types:[{title:"图片文件",extensions:"jpg,jpeg,gif,png,bmp"},{title:"办公文档",extensions:"doc,docx,xls,xlsx,ppt,pptx,pdf,txt"},{title:"压缩文件",extensions:"zip,rar"}],max_file_size:"20mb",prevent_duplicates:!0},init:{PostInit:function(n){var u=this._box.val().split(","),r;for(n._opts.picView&&u.length<2&&u.push("/images/none.jpg"),r=1;r<u.length;r++){var i=u[r],e=AX.filename(i).substr(11),f=i;i.substr(0,4)=="http"&&(f=i.substr(i.indexOf("/",10)+1));t(this,{id:n._opts.id+r,name:e,ossName:f,url:i,size:0,percent:100})}},FilesAdded:function(i,r){var f=i._files.children().length-1,u=0;plupload.each(r,function(n){i._opts.picView?t(i,n):f<i._opts.max?t(i,n):(u++,i.removeFile(n))});i._opts.autoUpload&&setTimeout(function(){i.start()},100);u>0&&n.messager.error({msg:"最多上传"+i._opts.max+"个文件，已移除队尾"+u+"个文件"})},BeforeUpload:function(n,t){var i,u;n._opts.bucket?(i=r(n),t.ossName=i.dir+"/"+AX.tick()+"_"+t.name,t.url=i.host+"/"+t.ossName,u={key:t.ossName,policy:i.policy,OSSAccessKeyId:i.accessid,success_action_status:"200",callback:i.callback,signature:i.signature},n.setOption({url:i.host,multipart_params:u})):n._opts.dir&&n.setOption({url:"/api/file/upload?folder="+n._opts.dir});n._opts.beforeUpload&&n._opts.beforeUpload.call(n)},UploadProgress:function(t,i){n("#file-"+i.id).find("b").text(i.percent+"%").end().find(".progress-bar").attr("aria-valuenow",i.percent).css("width",i.percent+"%")},FileUploaded:function(t,i,r){r.status==200?(t._opts.dir&&(t._opts.bucket||(i.url=JSON.parse(r.response).value),n("#file-"+i.id).find("a.lk").attr("href",i.url).end().find("img").attr("src",i.url),t._box.val(t._box.val()+","+i.url)),t._opts.uploaded&&t._opts.uploaded.call(t,i,r)):r.status==203},Error:function(t,i){i.code==-600?n.messager.error({msg:"选择的文件太大了！"}):i.code==-601?n.messager.error({msg:"选择的文件后缀不对！"}):i.code==-602?n.messager.error({msg:"这个文件已经上传!"}):n.messager.error({msg:"发生错误:"+i.response})}}}}(jQuery),function(n){n.aceui={auto:!0,plugins:["uploadbox","kindeditor","navigation","echart","iframe",["selectbox","combo"],"player"],parse:function(t){for(var i,r,f,u=0;u<n.aceui.plugins.length;u++)i=n.aceui.plugins[u],r=i,typeof i!="string"&&(i=i[0],r=r[1]),f=n(".aceui-"+i,t),f.length&&f[r]&&f[r]()}};Date.prototype.dateAdd=function(n,t){var r=this,i={y:"FullYear",q:"Month",m:"Month",w:"Date",d:"Date",h:"Hours",n:"Minutes",s:"Seconds",ms:"MilliSeconds"};return eval("d.set"+i[n]+"(d.get"+i[n]+"()+"+({q:3,w:7}[n]||1)*t+")"),r};Date.prototype.dateDiff=function(n,t){var r=this,i={},u=r.getTime(),f=t.getTime();return i.y=t.getFullYear()-r.getFullYear(),i.q=i.y*4+Math.floor(t.getMonth()/4)-Math.floor(r.getMonth()/4),i.m=i.y*12+t.getMonth()-r.getMonth(),i.ms=t.getTime()-r.getTime(),i.w=Math.floor((f+3456e5)/6048e5)-Math.floor((u+3456e5)/6048e5),i.d=Math.floor(f/864e5)-Math.floor(u/864e5),i.h=Math.floor(f/36e5)-Math.floor(u/36e5),i.n=Math.floor(f/6e4)-Math.floor(u/6e4),i.s=Math.floor(f/1e3)-Math.floor(u/1e3),i[n]}}(jQuery),function(n){n.rnd=function(){return((1+Math.random())*65536|0).toString(16).substring(1)};n.fn.outerHtml=function(t){return t?this.before(t).remove():n("<p>").append(this.eq(0).clone()).html()};n.fn.serializeObject=function(){"use strict";var i=this.serializeArray(),t;return n(".aceui-checkbox:not(:checked)").filter(function(){return this.name&&!this.disabled}).map(function(){return{name:this.name,value:0}}).each(function(){i.push(this)}),t={},n.each(i,function(n,i){var r=t[i.name];t[i.name]=typeof r!="undefined"&&r!=null?r&&i.value?r+","+i.value:r?r:i.value?i.value:null:i.value}),t};n.fn.center=function(t){var t=n.extend({inside:null,duration:0,minX:10,minY:10,scrolling:!1,v:!0,h:!0},t);return this.each(function(){var f={position:"absolute"},u=t.inside?n(t.inside):n(this).parent(),i,r;return t.v&&(i=(u.height()-n(this).outerHeight())/2,t.scrolling&&(i+=u.scrollTop()||0),i=i>t.minY?i:t.minY,i=u.css("position")!="absolute"?i:i+parseInt(u.css("top"),10),n.extend(f,{top:i+"px"})),t.h&&(r=(u.width()-n(this).outerWidth())/2,t.scrolling&&(r+=u.scrollLeft()||0),r=r>t.minX?r:t.minX,r=u.css("position")!="absolute"?r:r+parseInt(u.css("left"),10),n.extend(f,{left:r+"px"})),t.duration>0?n(this).animate(f,t.duration):n(this).css(f),n(this)})};n.fn.acetip=function(){n(this).tooltip({position:"right",content:function(){return"<span style=\"color:#fff;font:14px/1.5 '微软雅黑',YaHei;\">"+n(this).attr("tooltip")+"<\/span>"},onShow:function(){n(this).tooltip("tip").css({backgroundColor:"#425160",borderColor:"#425160",padding:"8px 10px",opacity:"0.9",filter:"alpha(opacity = 90)","border-radius":"0"})}})};n.fn.imgFloat=function(t){function c(){var t=n(window).width()-i.width(),f=n(window).height()-i.height();e==0&&(u+=s,i.css({left:u}),u>=t&&(u=t,e=1));e==1&&(u-=s,i.css({left:u}),u<=0&&(e=0));o==0&&(r+=s,i.css({top:r}),r>=f&&(r=f,o=1));o==1&&(r-=s,i.css({top:r}),r<=0&&(o=0))}var i=this,e=0,o=0,s=1,f={speed:15,xPos:0,yPos:0},r,u,h;n.extend(f,t);r=f.xPos;u=f.yPos;i.css({position:"absolute",cursor:"pointer"});h=setInterval(c,f.speed);i.hover(function(){clearInterval(h)},function(){h=setInterval(c,f.speed)})};n.cookie=function(t,i,r){var e,u,o,s,f,h;if(typeof i!="undefined"){r=r||{};i===null&&(i="",r.expires=-1);e="";r.expires&&(typeof r.expires=="number"||r.expires.toUTCString)&&(typeof r.expires=="number"?(u=new Date,u.setTime(u.getTime()+r.expires*864e5)):u=r.expires,e="; expires="+u.toUTCString());var c=r.path?"; path="+r.path:"",l=r.domain?"; domain="+r.domain:"",a=r.secure?"; secure":"";document.cookie=[t,"=",encodeURIComponent(i),e,c,l,a].join("")}else{if(o=null,document.cookie&&document.cookie!="")for(s=document.cookie.split(";"),f=0;f<s.length;f++)if(h=n.trim(s[f]),h.substring(0,t.length+1)==t+"="){o=decodeURIComponent(h.substring(t.length+1));break}return o}}}(jQuery),function(n){function t(t){var i=n(t),r,u;if(i.hasClass("nav")){r=i.find("> li > a");u=i.find("ul");r.on("click",function(t){t.preventDefault();n(this).attr("class")!="active"&&(u.slideUp("normal"),n(this).next().stop(!0,!0).slideToggle("normal"),r.removeClass("active"),n(this).addClass("active"))});r.first().addClass("active").next().slideDown("normal")}else i.find("> li").hover(function(t){t.preventDefault();n(this).find("ul").stop(!0,!0).slideToggle("normal")})}n.fn.navigation=function(i,r){return typeof i=="string"?n.fn.navigation.methods[i](this,r):(i=i||{},this.each(function(){var r=n.data(this,"navigation");r?n.extend(r.options,i):r=n.data(this,"navigation",{options:n.extend({},n.fn.navigation.defaults,n.parser.parseOptions(this),i)});t(this)}))};n.fn.navigation.methods={options:function(t){return n.data(t[0],"navigation").options}};n.fn.navigation.defaults={}}(jQuery),function(n){function t(t){var r=n.data(t,"echart"),u=echarts.init(t),i=r.options;i.url&&AX.ajax({type:i.type,url:i.url,data:i.param,cb:function(n){var t=i.option;i.dataset?t.dataset={source:n.value}:t.series instanceof Array?t.series[0].data=n.value:t.series.data=n.value;u.setOption(t)}})}n.fn.echart=function(i,r){return typeof i=="string"?n.fn.echart.methods[i](this,r):(i=i||{},this.each(function(){var r=n.data(this,"echart");r?n.extend(r.options,i):r=n.data(this,"echart",{options:n.extend({},n.fn.echart.defaults,n.fn.echart.parseOptions(this),i)});t(this)}))};n.fn.echart.methods={options:function(t){return n.data(t[0],"echart").options},reload:function(n){return n.each(function(){t(this)})}};n.fn.echart.parseOptions=function(t){var i=n(t);return n.extend({},n.parser.parseOptions(t,[]),{})};n.fn.echart.defaults={}}(jQuery),function(n){function t(t){var i=n.data(t,"kindeditor").options;KindEditor.ready(function(n){i.editor=n.create("#"+t.id,i)})}n.fn.kindeditor=function(i,r){return typeof i=="string"?n.fn.kindeditor.methods[i](this,r):(i=i||{},this.each(function(){var r=n.data(this,"kindeditor");r?n.extend(r.options,i):r=n.data(this,"kindeditor",{options:n.extend({},n.fn.kindeditor.defaults,n.parser.parseOptions(this),i)});t(this)}))};n.fn.kindeditor.methods={options:function(t){return n.data(t[0],"kindeditor").options},sync:function(t){return t.each(function(){n.data(this,"kindeditor").options.editor.sync()})}};n.fn.kindeditor.defaults={minWidth:"400px",minHeight:"150px",basePath:"/scripts/kindeditor/",pasteType:1,allowFileManager:!0,uploadJson:"/api/file/upload",fileManagerJson:"/api/file/getkind",filePostName:"file",items:["fullscreen","source","|","fontname","fontsize","forecolor","hilitecolor","bold","italic","underline","removeformat","emoticons","|","justifyleft","justifycenter","justifyright","insertorderedlist","insertunorderedlist","|","image","link","table","wordpaste"],cssData:".ke-content p {text-indent:2em;line-height:150%;padding:0.2em 0;}",filterMode:!1}}(jQuery),function(n){n.fn.iframe=function(t,i){return typeof t=="string"?n.fn.iframe.methods[t](this,i):(t=t||{},this.each(function(){var i=n.data(this,"iframe");i?n.extend(i.options,t):i=n.data(this,"iframe",{options:n.extend({},n.fn.iframe.defaults,n.parser.parseOptions(this),t)})}))};n.fn.iframe.methods={options:function(t){return n.data(t[0],"iframe").options},click:function(n,t){return n.each(function(){AX.iframe.track(this,t)})}};n.fn.iframe.defaults={}}(jQuery),function(n){var t={opts:{w:750,h:450,url:n.location.href,maxW:$(n.top).width(),maxH:$(n.top).height(),dialogMode:!0,_modified:!1,_curTreeId:null,_uploadedFiles:[],_curMods:[]},init:function(n){n=n||{};this.opts=$.extend(this.opts,n);AX.root=n.root||"/"},modify:function(){t.opts._modified=!0},wxRun:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("micromessenger")!=-1},query:function(t,i){var e,h,o,r,u,s,f;if(typeof i=="undefined"?i=n.location.search:(e=i.indexOf("?"),e>0&&(i=i.substr(e))),typeof t!="undefined")return(h=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),o=i.substr(1).match(h),o!=null)?unescape(o[2]):null;for(r=[],s=i.substr(1).split("&"),f=0;f<s.length;f++)u=s[f].split("="),r.push(u[0]),r[u[0]]=u[1];return r},close:function(){n.open("","_self","");n.close()},refresh:function(){n.location=n.location},index:function(){n.location=t.opts.app=="app"?t.opts.root+"app":t.opts.root},login:function(){n.location=t.format("{0}?app={1}",t.opts.loginUrl,t.opts.app)},enter:function(){n.location=t.format("{0}plat/account/enter?app={1}",t.opts.root,t.opts.app)},logout:function(){n.location=t.format("{0}?app={1}",t.opts.logoutUrl,t.opts.app)},tfocus:function(){var n=$("input:text,input:password").not(":hidden");n.bind("keydown",function(t){if(t.which==13){t.preventDefault();var i=n.index(this)+1;i<n.length?n[i].focus():login()}})},path:function(n){return AX.opts.path+n},app:function(n){return t.format("{0}{1}/{2}",t.opts.root,t.opts.app,n)},load:function(n){n.substr(0,1)!="/"&&(n=t.path(n));$(".ct-wrap").find("iframe").attr("src",n)},go:function(n){var t=n.indexOf("|"),i,r=t>0?n.substr(0,t):n;$("[data-url='"+r+"']").trigger("click");n=n.substr(t+1);i=n.split("/");$("[data-url='"+r+"/"+i[0]+"']").trigger("click");i.length>1&&AX.load("/"+r+"/"+n)},gourl:function(t){n.location=t.substr(0,1)=="/"?t:AX.app(t)},initFt:function(){$(".ct-title").append('<button class="fr btn btn-default btn-xs ml20 mt5" onclick="AX.refresh()"><span class="fa fa-refresh"><\/span> 刷新<\/button>');$(".ct-wrap .btn[data-cmd]").click(function(){var n=$(this).attr("data-cmd");n=="reload"?AX.refresh():n=="save"?onSubmit(AX.ok):n=="save-back"&&onSubmit(function(){AX.ok();AX.gourl($(this).attr("data-url"))})})},initBk:function(){$(".ct-title").append('<button class="fr btn btn-default btn-xs ml10 mt8" data-cmd="max"><span class="fa fa-window-maximize"><\/span> 全屏打开<\/button>');$(".ct-title").append('<button class="fr btn btn-default btn-xs ml20 mt8" data-cmd="reload"><span class="fa fa-refresh"><\/span> 刷新<\/button>');$(".ct-wrap .btn[data-cmd]").click(function(){var n=$(this).attr("data-cmd");n=="reload"?AX.reload():n=="max"?window.open(window.location.href.replace("&nav=1","")):n=="back"?AX.back():n=="save"?onSubmit(AX.ok):n=="save-back"&&onSubmit(function(){AX.ok();n.indexOf("back")>=0&&AX.back()})})},back:function(){n.history.back()},reload:function(){AX.refresh()},onLogin:function(){AX.formSubmit("#log",function(n){$.messager.info({msg:"登录成功"});window.location=n})},formSubmit:function(n,i,r,u){var e=$(n),s,o,f;if(e.length!=0&&(typeof i=="undefined"&&(i=null),$(".aceui-kindeditor").kindeditor("sync"),e.form("validate"))){for(s=function(){var n=e.data("form"),o=n.options.url,s=e.serializeObject(),f=n.options.isEdit?$.extend(s,{id:n.data.id}):$.extend(n.data,s);r&&(o+="&"+r);u&&(f=$.extend(f,u));t.ajax($.extend({},n.options,{url:o,cb:i,data:f,headers:{RequestVerificationToken:f.__RequestVerificationToken}}))},o=0;o<AX.opts._uploadedFiles.length;o++){if(f=AX.opts._uploadedFiles[o],f.settings.required&&f.settings.target.val()==""&&f.getStats().files_queued==0)return $.messager.error({msg:"请选择要上传的文件！"}),!1;if(f.getStats().files_queued>0)return f.settings.onComplete=s,f.startUpload(),!1}s()}},formReset:function(n){var t=$(n);t.length!=0&&t.form("reset")},formLoad:function(n,t){$(n).data("form").data=t;$(n).form("load",t);typeof onLoad=="function"&&onLoad(t)},selShow:function(){var n=$(this),i=n.combo("options"),r=i.multiple?n.combo("getValues")+"&multi=1":n.combo("getValue");return t.dialog("请选择",t.aurl(i.url,"val",r),function(t,r){if(i.onSelect&&i.onSelect.call(n,t,r)==!1)return!0;n.combo("setValue",t);n.combo("setText",r)},i.panelWidth,i.panelHeight),!1},btnShow:function(){var i=$(this),n=i.linkbutton("options"),r=$(n.valBox),u=$(n.txtBox),f=r.textbox("getValue");return t.dialog("请选择",t.aurl(n.url,"val",f),function(t,f){if(n.onSelect&&n.onSelect.call(i,t,f)==!1)return!0;r.textbox("setValue",t);u.textbox("setValue",f);n.onChange&&n.onChange.call(i,t,f)},n.dialogWidth||t.opts.w,n.dialogHeight||t.opts.h),!1},selText:function(n){$(this).combo("setText",n)},treeAdd:function(n,t,i){var r={level:t};i&&(r.editUrl=i);$(n).tree("add",r)},treeEdit:function(n,t,i){var r={level:t};i&&(r.editUrl=i);$(n).tree("edit",r)},treeDel:function(n,t,i){var r={level:t,ds:i};$(n).tree("del",r)},gridSrh:function(n,t){var r,i=$(n),u=$(t);i.hasClass("easyui-datagrid")?(r=$.extend(i.datagrid("options").queryParams,u.serializeObject()),i.datagrid("load",r)):(r=$.extend(i.treegrid("options").queryParams,u.serializeObject()),i.treegrid("load",r))},gridClr:function(n,i){t.formReset(i);t.gridSrh(n,i)},gridEx:function(n){var r=$(n),i=r.hasClass("easyui-datagrid")?r.datagrid("options"):r.datagrid("options"),u=i.url.split("?").length>1?i.url.split("?")[1]:"",o=$.param(i.queryParams),f,e;o&&(u+="&"+$.param(i.queryParams));f=t.api({api:"excel/down",q:u+"&path="+t.opts.path});e=t.format('<form action="{0}" method="post"><\/form>',AX.aurl(f,"rows","0"));$(e).appendTo("body").submit().remove()},gridTb:function(n){var t=typeof n=="string"?$(n):n,i=[{iconCls:"icon-excel",text:"&nbsp;导出Excel文件",handler:function(){AX.gridEx(n)}}];t.hasClass("easyui-datagrid")?t.datagrid("getPager").pagination({buttons:i}):t.treegrid("getPager").pagination({buttons:i})},gridAdd:function(n,i,r){var u=AX.query("taskid");r&&u&&(i=i?t.aurl(i,"taskid",u,!0):"taskid="+u);$(n).hasClass("easyui-datagrid")?$(n).datagrid("add",i):$(n).treegrid("add",i)},gridEdit:function(n,t){$(n).hasClass("easyui-datagrid")?$(n).datagrid("edit",t):$(n).treegrid("edit",t)},gridDel:function(n,t){$(n).hasClass("easyui-datagrid")?$(n).datagrid("del",t):$(n).treegrid("del",t)},gridWf:function(n,i){var r=t.query("taskid");AX.dialog("查看流程","/plat/wf/track?appinstanceid="+i+"&taskid="+r,onWf,800,500)},gridAct:function(n,i,r){i=="del"?t.gridDel(n,r):i=="edit"?t.gridEdit(n,r):i=="wf"?t.gridWf(n,r):new Function(t.format('event_{0}_{1}("{2}","{3}");',n.substr(1),i,n,r))()},gridFmt:function(n,i){var y,f,o,l,s,a,c,v,e,p,u,h,r;if(n==null||n==="")return n;y=this.format.split(":")[0];f=this.format.substr(this.format.indexOf(":")+1);switch(y){case"date":if(t.isdate(n))return t.datestr(n,f);case"bool":return n=="1"?'<span class="icon icon-ok"><\/span>':"";case"action":return t.format('<a href="javascript:void()" class="grid" onclick="{0}(\''+n.replace(/\\/g,"\\\\")+"','"+i.id+'\')" title="{1}">',f.split("="))+n+"<\/a>";case"link":if(o=t.objstr(f,i),o.substr(0,1)==","&&(o=o.substr(1)),n.substr(0,1)==","&&(n=n.substr(1)),n!=""){if(u=o.replace(/=,/g,"=").split("|"),u.length>1){for(l=n,r=0;r<u.length;r++)if(s=u[r].split("="),s[1])if(a=s[1].split(","),a.length>1)for(c=0;c<a.length;c++)l+=' <a target="_blank" href="'+a[c]+'">'+s[0]+(c+1).toString()+"<\/a>";else l+=' <a target="_blank" href="'+s[1]+'">'+s[0]+"<\/a>";return l}return'<a target="_blank" href="'+o+'">'+n+"<\/a>"}return n;case"href":return n.substr(0,1)==","&&(n=n.substr(1)),'<a target="_blank" href="'+n+'">'+f+"<\/a>";case"icon":return'<span class="icon '+n+'"><\/span>';case"text":return n.replace(/\r\n/g,"<br/>");case"button":for(h="",v=n.split(","),r=0;r<v.length;r++)e=v[r].split("=")[0],p=v[r].split("=")[1],h+=t.format("<a class=\"easyui-linkbutton aceui\" data-options=\"iconCls:'fa fa-{0}',text:'{5}'\" onclick=\"AX.gridAct('{4}','{1}','{3}')\" title=\"{2}\"><\/a>",e.split("_").length>1?e.split("_")[1]:e,e.split("_")[0],p,i.id.replace(/\\/g,"\\\\"),f,e.split("_").length>2?e.split("_")[2]:"");return h;case"attach":for(u=n.split(","),h="",r=1;r<u.length;r++)h+=t.format('<div class="lh20"><a href="{0}{1}" target="_blank" title="{2}">{3}{2}<\/a><\/div>',u[r].substr(0,4)=="http"?"":t.opts.root,u[r],t.filename(u[r]).substr(11),u.length>2?r+".":"");return h;case"qrcode":return t.format('<img src="/api/draw/getqrcode?text={0}" />',n);case"tip":return t.format('<a href="javascript:;" class="easyui-tooltip" data-options="content:$(\'<div><\/div>\'),onUpdate:{1}">{0}<\/a>',n,f);case"size":return t.filesize(n);default:return n}},dialog:function(n,i,r,u,f,e){typeof u=="undefined"&&(u=t.opts.w);typeof f=="undefined"&&(f=t.opts.h);i.substr(0,1)!="/"&&(i=t.path(i));var h=r==null?null:[{text:"确定",iconCls:"fa fa-check",handler:function(){$("iframe",o).get(0).contentWindow.onSubmit(function(){r.apply(this,arguments)||s.dialog("destroy")})}},{text:"取消",iconCls:"fa fa-close",handler:function(){e&&e.apply(this,arguments);t.dlgClose($("iframe",o).get(0).contentWindow,s)}}],o=window.top.$('<div class="dialog"><\/div>'),s=o.dialog({width:u,height:f,modal:!0,resizable:!0,title:n,maximizable:!0,onOpen:function(){$("iframe",o).attr("src",i)},content:'<iframe frameborder="0" style="width:100%;height:100%;margin:0px;padding:0px"><\/iframe>',onBeforeClose:function(){return t.dlgClose($("iframe",o).get(0).contentWindow,s)},buttons:h})},dclose:function(){t.dlgClose(window,window.parent.$(".dialog").last())},dlgClose:function(n,t){return n._modified&&confirm("数据已经修改，确定关闭窗口？")?t.dialog("destroy"):n._modified||t.dialog("destroy"),!1},root:"/",ok:function(n){typeof n=="string"?$.messager.info({msg:n}):$.messager.info({msg:"操作成功！"})},error:function(n){typeof n=="string"?$.messager.error({msg:n}):$.messager.error({msg:"操作失败！"})},okcall:function(n){$.messager.alert("提示","操作成功！","info",n)},ajaxerror:function(n){try{var t=n.responseJSON.error_description||n.responseJSON.error;$.messager.error({msg:t})}catch(i){$.messager.error({msg:n.status+"："+n.statusText})}},ajax:function(n){n.success=n.success||function(t){n.cb&&n.cb(t)};(n.type=="post"||n.type=="put")&&(n.data=JSON.stringify(n.data),n.dataType=n.dataType||"json",n.contentType=n.contentType||"application/json");n.error=n.error||this.ajaxerror;$.ajax(n)},api:function(n){var i=t.format("{0}api/{1}",t.opts.root,n.api);return n.ds&&(i=t.aurl(i,"app",t.opts.app),i=t.aurl(i,"ds",n.ds)),n.q&&(i+=i.indexOf("?")>0?"&":"?",i+=n.q),i},ext:function(n){var t=n.lastIndexOf(".");return t>0?n.substring(t):""},filename:function(n){var t=n.lastIndexOf("/");return t>0?n.substring(t+1):n},filesize:function(n){return n<1048576?(n/1024).toFixed(2)+"KB":n==1048576?"1MB":n>1048576&&n<1073741824?(n/1048576).toFixed(2)+"MB":n>1048576&&n==1073741824?"1GB":n>1073741824&&n<1099511627776?(n/1073741824).toFixed(2)+"GB":">1TB"},len:function(n){for(var t=0,i=0;i<n.length;i++,t++)n[i].match(/[^x00-xff]/ig)!=null&&t++;return t},now:function(){return new Date},tick:function(){return Date.parse(new Date)/1e3},pad:function(n,t,r,u){if(n.length<r){var f="";for(i=1;i<=r-n.length;i++)f+=t;return u?f+n:n+f}return n},format:function(){var n=arguments;return n.length<1?null:n[0].replace(/\{(\d+)(:(0{2,}))?\}/g,function(t,i){var f=t.indexOf(":"),r=$.isArray(n[1])?n[1][i].toString():n[++i].toString(),u;return f<0?r:(u=t.substring(f+1,t.length-1),u.length<r.length)?r:u.substr(0,u.length-r.length)+r})},aurl:function(n,t,i,r){var u=n.indexOf(t+"="),f;return u>0?(f=n.indexOf("&",u),f>u?n.replace(n.substr(u,f-u),t+"="+i):n.substr(0,u)+t+"="+i):r||n.indexOf("?")>0?n+"&"+t+"="+i:n+"?"+t+"="+i},objstr:function(n,t){return t?n.replace(/\{([^\d\{\}]+)([\w\_]+)?\}/g,function(n,i){return t[i]}):n},rndstr:function(n){var t;n=n||32;var i="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",u=i.length,r="";for(t=0;t<n;t++)r+=i.charAt(Math.floor(Math.random()*u));return r},tohex:function(n,i){var r=typeof n=="number"?n:parseInt(n);return t.pad(r.toString(16).toUpperCase(),"0",i,1)},fromhex:function(n){return parseInt(n,16)},isdate:function(n){var i=t.dateobj(n);return!isNaN(i)||!isNaN(d2)},date:function(n){return t.datestr(t.now,n)},dateobj:function(n){var t=n.match(/\d+/g);return new Date(t[0],t[1]-1,t[2],t[3]||0,t[4]||0,t[5]||0)},datestr:function(n,i){return typeof n=="string"&&(n=t.dateobj(n)),i.replace(/"[^"]*"|'[^']*'|\b(?:d{1,4}|M{1,4}|yy(?:yy)?|([hHmstT])\1?|[lLZ])\b/g,function(i){switch(i){case"d":return n.getDate();case"dd":return t.format("{0:00}",n.getDate());case"ddd":return $.fn.calendar.defaults.weeks[n.getDay()];case"dddd":return"星期"+$.fn.calendar.defaults.weeks[n.getDay()];case"M":return n.getMonth()+1;case"MM":return t.format("{0:00}",n.getMonth()+1);case"MMM":return $.fn.calendar.defaults.months[n.getMonth()].replace("月","");case"MMMM":return $.fn.calendar.defaults.months[n.getMonth()];case"yy":return String(n.getFullYear()).substr(2);case"yyyy":return n.getFullYear();case"h":return n.getHours()%12||12;case"hh":return t.format("{0:00}",n.getHours()%12||12);case"H":return n.getHours();case"HH":return t.format("{0:00}",n.getHours());case"m":return n.getMinutes();case"mm":return t.format("{0:00}",n.getMinutes());case"s":return n.getSeconds();case"ss":return t.format("{0:00}",n.getSeconds());case"l":return t.format("{0:000}",n.getMilliseconds(),3);case"L":var r=n.getMilliseconds();return r>99&&(r=Math.round(r/10)),t.format("{0:00}",r);case"tt":return n.getHours()<12?"am":"pm";case"TT":return n.getHours()<12?"AM":"PM";case"Z":return n.toUTCString().match(/[A-Z]+$/);default:return i.substr(1,i.length-2)}})},iframe:{resolution:200,iframes:[],interval:null,Iframe:function(){this.element=arguments[0];this.cb=arguments[1];this.hasTracked=!1},track:function(n,t){if(this.iframes.push(new this.Iframe(n,t)),!this.interval){var i=this;this.interval=setInterval(function(){i.checkClick()},this.resolution)}},checkClick:function(){var t,n;if(document.activeElement){t=document.activeElement;for(n in this.iframes)t===this.iframes[n].element?this.iframes[n].hasTracked==!1&&(this.iframes[n].cb.apply(window,[]),this.iframes[n].hasTracked=!0):this.iframes[n].hasTracked=!1}}}};n.AX=t}(window);$(function(){$.aceui&&$.aceui.auto&&$.aceui.parse();AX.tfocus()});